var app_tasks_js_controller={login:"Anonymous",session_connect:!1,tab_open:"tasks",menu_open:!1,tasks_ico_mini_menu_hidden_move:!1,form_now:-1,edit_process:!1,now_p:"",dir_user_tasks_file:"",email:"",gl:"",taskId:-1,column_sort:"",column_sort_ordby:"",spage_num:1,log_status:!1,log:function(a){app_tasks_js_controller.log_status&&console.log(a)},ready:function(){$("body").click(function(){app_tasks_js_controller.tasks_ico_hidden_click("mini_menu",!1)});app_tasks_js_controller.start_session()},start_session:function(){app_tasks_js_controller.session_connect&&
    app_tasks_js_controller.get_ui("general_ui");app_tasks_js_controller.get_ui("start_page")},get_ui:function(a,c){if("exit"==a)location.href="?exit=1";else if("close_or_open_form"==a)"none"!=$("#id_login_form").css("display")?($("#id_login_form").fadeOut("fast"),$(".cls_ahref_login1").html("Sign In")):(app_tasks_js_controller.get_ui("logged_in"),$(".cls_ahref_login1").html("Close"));else if("send_query"==c){var f=location.href,e="",d="";if("logged_in"==a||"registration"==a){e=$("#id_dbr_name").val();
    var g=$("#id_dbr_email").val(),l=$("#id_dbr_pasw").val(),h=$("#id_dbr_current_pasw").val();if(0==e.length)return alert("Enter your name"),!1;if(g&&0==g.length)return alert("Enter your email"),!1;if(getid("id_dbr_pasw")&&0==l.length)return app_tasks_js_controller.edit_process?(""==$("#id_dbr_current_pasw").val()?alert("Enter your current password"):alert("Enter your new password"),$("#id_dbr_pasw").focus()):"registration"==app_tasks_js_controller.form_now?alert("Enter a new password or log in"):(alert("Enter your current password"),
    $("#id_dbr_pasw").focus()),!1;getid("id_dbr_email")||(g="");e="&n="+encodeURIComponent(e)+"&e="+encodeURIComponent(g)+"&uo="+f+"&p="+md5("agdf34fee23"+l);if("registration"===app_tasks_js_controller.form_now&&app_tasks_js_controller.edit_process){if(0==h.length)return $("#id_dbr_current_pasw").focus(),alert("Please enter current password for confirm"),!1;e+="&cp="+md5("agdf34fee23"+h);a="registration"}}else if("edit_task_status"==a)e="&taskId="+app_tasks_js_controller.taskId+"&status_task=1";else if("send_task"==
    a){f=$("#id_task_descr_text_task").val();h=$("#id_task_email_input").val();g=$("#id_task_name_input").val();e="&taskId="+app_tasks_js_controller.taskId;e+="&task_name="+encodeURIComponent(g);e+="&task_email="+encodeURIComponent(h);e+="&task_descr="+encodeURIComponent(f);e+="&taskiddir="+encodeURIComponent(sr_load_files_images.tmp_taskiddir);if(0==g.length)return $("#id_task_name_input").focus(),alert("Please enter Name"),!1;if(0==h.length)return $("#id_task_email_input").focus(),alert("Please enter Email"),
    !1;if(!validateEmail(h))return $("#id_task_email_input").focus(),alert("Please enter correct Email"),!1;if(0==f.length)return $("#id_task_descr_text_task").focus(),alert("Please enter task description"),!1}else"load_tasks"==a?(""==app_tasks_js_controller.column_sort&&(app_tasks_js_controller.column_sort="user_name"),""==app_tasks_js_controller.column_sort_ordby&&(app_tasks_js_controller.column_sort_ordby="asc"),d="&now_p="+app_tasks_js_controller.now_p+"&column_sort="+app_tasks_js_controller.column_sort+
    "&column_sort_ordby="+app_tasks_js_controller.column_sort_ordby+"&spage_num="+app_tasks_js_controller.spage_num):"load_json_stat"==a?(d=(d=getid("id_link_json_stat_edit_get_login"))&&0<d.value.length?d.value:app_tasks_js_controller.login,d="&spak="+app_tasks_js_controller.spak_key+"&get_login="+d):"del_task"==a&&(d="&taskId="+app_tasks_js_controller.taskId+"&dpId="+sr_load_files_images.tmp_taskiddir+"&spak2="+app_tasks_js_controller.spak_key2);$.ajax({url:https_host+"index.php?ajax_controller=ajaxController&q="+
    a+e+d,cache:!1,success:function(b){if("err_msg"==b&&"send_task"==a)alert("There is an error in the message.");else if("del_task"==a)app_tasks_js_controller.close_form_task_edit(),"successfuly"!=b?"logged_in_not_correctly"==b?location.href="?exit=1&start&gl="+encodeURIComponent(app_tasks_js_controller.login):alert("Error #1. Server response:"+b):app_tasks_js_controller.get_ui("load_tasks","send_query");else if("load_tasks"==a)b=b.split("|:|"),5==b.length&&"-1"!=b[1]&&("load_tasks"==a?(app_tasks_js_controller.now_p=
    md5(b[0]),$("#id_task_list").html(b[0]),$("#id_task_pagination").html(b[3]),$("#id_count_tasks").html(" ("+b[2]+")"),$(".cls_svg_ico_sort_type").fadeIn("normal"),$(".cls_page_num").unbind("click"),$(".cls_page_num").click(function(){app_tasks_js_controller.spage_num=this.innerHTML;now_id_sort_column="id_sort_user_name";"email"==app_tasks_js_controller.column_sort&&(now_id_sort_column="id_sort_email");"status"==app_tasks_js_controller.column_sort&&(now_id_sort_column="id_sort_status");app_tasks_js_controller.click_column_sort(now_id_sort_column,
    "page_click")})):$("#id_tasks_log").html(b[0]),app_tasks_js_controller.resize(a));else if("load_json_stat"==a){var m="";"err_load_json_stat"!=b&&(m=JSON.stringify(b));app_tasks_js_controller.change_edit_get_login(m)}else if(app_tasks_js_controller.edit_process)"ch=1"==b?location.reload():"err_ch1."==b?alert("Error change password. Please enter correct data."):"err_req"==b?($("#id_dbr_current_pasw").focus(),alert("Error change password. Please enter correct data.")):"send_task_complete"==b?location.href=
    https_host+"?start&task=successfully":"Such user already exists"==b&&($("#id_dbr_name").val(app_tasks_js_controller.login),$("#id_dbr_name").focus(),alert("This user or email address already exists"));else if(b&&0<b.length&&-1!=b.indexOf("error_throttling:"))17<b.length?(b=60-1*b.substring(17),1>b&&(b=1),b="\nPlease try again in "+b+" seconds"):b="",$("#id_dbr_pasw").val(""),$("#id_dbr_pasw").focus(),alert("Too many login attempts, please try again later."+b);else if("Such user already exists"==b)$("#id_dbr_name").focus(),
    alert("This user or email address already exists");else if(b&&0<b.length&&-1!=b.indexOf("error_li:"))b=9<b.length?"\n"+(10-1*b.substring(9))+" attempts left":"",$("#id_dbr_pasw").val(""),$("#id_dbr_pasw").focus(),alert("Error password or login name"+b);else if("Such user already exists:start"==b||"rsuccessfuly"==b||"send_msg_complete"==b){if("logged_in"==a||"registration"==a)location.href=https_host+"?start&gl="+encodeURIComponent($("#id_dbr_name").val())}else"err_timeout:?"==b?alert("You have already created a new task. Please wait a minute."):
    "err_req_mail"==b?alert("Please enter your email."):-1!=b.indexOf("edit_task_data:")?"edit_task_data:task-update"==b?"edit_task_status"!=a||$("#id_task_"+app_tasks_js_controller.taskId+"_status").hasClass("cls_task_status_active")?"send_task"==a&&(app_tasks_js_controller.close_form_task_edit(),app_tasks_js_controller.get_ui("load_tasks","send_query"),alert("Task changed successfully")):$("#id_task_"+app_tasks_js_controller.taskId+"_status").addClass("cls_task_status_active"):"edit_task_data:task-err"==
    b&&alert("Error edit task"):"logged_in_not_correctly"==b?location.href="?exit=1&start&gl="+encodeURIComponent(app_tasks_js_controller.login):"send_task:task"==b?(app_tasks_js_controller.close_form_task_edit(),app_tasks_js_controller.get_ui("load_tasks","send_query"),alert("Task added successfully")):"err taskiddir"==b?(alert("You also need to upload a photo"),$("#id_form_upload_container_images").click()):"registration"==a&&"err_req"==b?alert("Try another login or email"):"err_user_name"==b?alert("Please enter correct Name.\nOnly English and Russian alphabets can be used without spaces"):
    "err_email"==b?alert("Please enter correct Email"):"err_descr"==b?alert("Please enter correct Description"):alert("error sinh. data? "+b)}})}else{"edit"!=c&&(app_tasks_js_controller.edit_process=!1);var k=app_tasks_js_controller.gl;"undefined"==typeof k&&getid("id_dbr_name")&&(k=encodeURIComponent($("#id_dbr_name").val()));d="";"logged_in"==a?(app_tasks_js_controller.form_now="logged_in",cv_url(https_host+"?login&gl="+k),d=tasks_forms.get_form_login()):"registration"==a?(app_tasks_js_controller.form_now=
    "registration",app_tasks_js_controller.session_connect||cv_url(https_host+"?signup"),"edit_name"==c||"edit_pasw"==c?(app_tasks_js_controller.form_now="registration","edit_pasw"==c?cv_url(https_host+"?edit_pasw=1&gl="+app_tasks_js_controller.login):cv_url(https_host+"?"+c),app_tasks_js_controller.edit_process=!0,d=tasks_forms.get_form_registration(c)):d=tasks_forms.get_form_registration()):"start_page"==a&&(app_tasks_js_controller.form_now="start_page",0<k.length&&(cv_url(https_host+"?start"),app_tasks_js_controller.get_ui("logged_in"),
    0!=app_tasks_js_controller.login.length&&"Anonymous"!=app_tasks_js_controller.login||setTimeout(function(){app_tasks_js_controller.get_ui("logged_in");$(".cls_ahref_login1").html("Close");$("#id_dbr_name").val(k);$("#id_dbr_pasw").focus()},100),$(".cls_ahref_login1").html("Close"),$("#id_dbr_name").val(k),0==app_tasks_js_controller.login.length?($(".cls_login_comments").html("Congratulations, you have successfully registered!"),$(".cls_login_comments").fadeIn("normal")):cv_url(https_host)),$("#id_general_ui").html(tasks_forms.get_form_start_page()),
    app_tasks_js_controller.session_connect&&$("#id_but_public_api_json_stat").css({display:"block"}),$("#id_tasks_general_ui").html(tasks_forms.get_form_general_ui()),app_tasks_js_controller.tasks_ico_hidden_click("big_menu",!1),app_tasks_js_controller.buttons_events(),app_tasks_js_controller.open_tab("id_but_public_tasks","id_dinamic_box_tasks"));$(".cls_settings_ico_box").unbind("mouseenter");$(".cls_settings_ico_box").mouseenter(function(){app_tasks_js_controller.tasks_ico_mini_menu_hidden_move=!0}).mouseleave(function(){app_tasks_js_controller.tasks_ico_mini_menu_hidden_move=
    !1});""!=d?($("#id_login_form").html(d),$("#id_login_form").fadeIn("fast",function(){app_tasks_js_controller.start_login_form(a)})):$("#id_login_form").fadeOut("fast")}},close_form_task_edit:function(){$("#id_but_send_public_task").html("Add new task");app_tasks_js_controller.taskId=-1;app_tasks_js_controller.delete_list_images("");preview_load_images();$("#id_task_descr_text_task").val("");$("#id_task_email_input").val("");$("#id_task_name_input").val("")},start_login_form:function(a){app_tasks_js_controller.dbr_input_events_refresh(a)},
    click_column_sort:function(a,c){$("#"+a).addClass("active");"undefined"==typeof c&&("asc"==$("#"+a).attr("sort")?(app_tasks_js_controller.column_sort_order="desc",$("#"+a).attr("sort","desc")):(app_tasks_js_controller.column_sort_order="asc",$("#"+a).attr("sort","asc")));app_tasks_js_controller.column_sort=a.replace("id_sort_","");app_tasks_js_controller.column_sort_ordby=$("#"+a).attr("sort");app_tasks_js_controller.get_ui("load_tasks","send_query")},dbr_input_events_refresh:function(a){$(".cls_dbr_input").unbind("keyup");
    $(".cls_dbr_input").keyup(function(c){13==c.which&&("registration"==a?$(".cls_but_sign_up").click():"logged_in"==a&&$(".cls_but_login").click())})},delete_list_images:function(a){imgs_n=0;arr_image_files=[];arr_image_names=[];arr_image_files.splice(0,arr_image_files.length);arr_image_names.splice(0,arr_image_names.length)},change_task_directory:function(a,c,f){app_tasks_js_controller.taskId=f;sr_load_files_images.tmp_puth_user="storage_files/images_of_tasks/"+a+"/";sr_load_files_images.tmp_taskiddir=
    c;load_task_user_for_editing(c);$("html").animate({scrollTop:75},100)},comleted_task_directory:function(a,c,f){app_tasks_js_controller.taskId=f;sr_load_files_images.tmp_puth_user="storage_files/images_of_tasks/"+a+"/";sr_load_files_images.tmp_taskiddir=c;app_tasks_js_controller.get_ui("edit_task_status","send_query")},delete_task_directory:function(a,c,f){confirm("Confirm deletion?")&&(app_tasks_js_controller.taskId=f,sr_load_files_images.tmp_puth_user="storage_files/images_of_tasks/"+a+"/",sr_load_files_images.tmp_taskiddir=
    c,app_tasks_js_controller.get_ui("del_task","send_query"))},change_edit_get_login:function(a){var c=getid("id_link_json_stat_edit_get_login");c=c&&0<c.value.length?c.value:app_tasks_js_controller.login;c=https_host+"index.php?ajax_controller=ajaxController&q=load_json_stat&spak="+(app_tasks_js_controller.spak_key+"&get_login="+c);$("#id_link_json_stat").attr("href",c);$("#id_link_json_stat").attr("target","_blank");$("#id_link_json_stat_edit").val(c);$("#id_link_json_stat_result").html(a)},buttons_events:function(){$(".cls_but_menu").click(function(){"id_but_public_tasks"==
    this.id?app_tasks_js_controller.open_tab(this.id,"id_dinamic_box_tasks"):"id_but_public_api_json_stat"==this.id&&app_tasks_js_controller.open_tab(this.id,"id_dinamic_box_add_task")})},open_tab:function(a,c){$(".cls_but_menu").removeClass("active");$(".cdimb").removeClass("active");$(".cls_link_json_stat_tab").removeClass("active");$("#"+a).addClass("active");if("id_but_public_api_json_stat"==a)"statistics"!=app_tasks_js_controller.tab_open&&app_tasks_js_controller.get_ui("load_json_stat","send_query"),
    $(".cls_link_json_stat_tab").addClass("active"),app_tasks_js_controller.tab_open="statistics";else{$("#"+c).addClass("active");if("id_but_public_tasks"==a){if("tasks"==app_tasks_js_controller.tab_open){app_tasks_js_controller.get_ui("load_tasks","send_query");try{fileUpload("images"),$("#id_dinamic_box_tasks").addClass("active")}catch(f){alert("Error tasks fileUpload().")}}$("#id_dinamic_box_add_task").addClass("active");app_tasks_js_controller.tab_open="tasks"}app_tasks_js_controller.resize("open_tab",
    a)}},click:function(){alert("click href open functional")},change_ses_data:function(){app_tasks_js_controller.get_ui("registration","send_query")},tasks_ico_hidden_click:function(a,c){"mini_menu"==a?setTimeout(function(){"undefined"!=typeof c&&app_tasks_js_controller.tasks_ico_mini_menu_hidden_move||("none"!=$(".cls_mini_menu").css("display")||"undefined"!=typeof c&&!c?$(".cls_mini_menu").css({display:"none"}):$(".cls_mini_menu").css({display:"inline-block"}))},100):app_tasks_js_controller.menu_open||
    "big_menu"==a&&!c?(app_tasks_js_controller.menu_open=!1,$(".cls_dinamic_box_menu").css({display:"none"}),$(".cls_dbr_menu_name").fadeOut("fast"),$(".cls_tasks_ico_hidden").css({display:"none","float":"left","margin-left":"10px"}),$(".cls_tasks_ico_hidden").removeClass("posright"),$(".cls_tasks_ico_hidden").addClass("posleft")):(app_tasks_js_controller.menu_open=!0,$(".cls_dinamic_box_menu").css({display:"none"}),$(".cls_tasks_ico_hidden").css({display:"inline-block","float":"right","margin-left":"auto"}),
    $(".cls_tasks_ico_hidden").removeClass("posleft"),$(".cls_tasks_ico_hidden").addClass("posright"))},resize:function(a,c){callback_onresize(a);("open_tab"==a&&"id_but_public_tasks"==c||"global_resize"==a&&"tasks"==app_tasks_js_controller.tab_open)&&app_tasks_js_controller.session_connect&&$("#id_dinamic_box_add_task").addClass("active")}};window.addEventListener("resize",correct_resize_route,!1);var restimebreak;
    function correct_resize_route(){restimebreak||(restimebreak=setTimeout(function(){restimebreak=null;callback_onresize()},66))}var onresize_flag=!1,real_screenH=-1,real_screenW=-1;function callback_onresize(a){real_screenW=screenSize().w;real_screenH=screenSize().h;"global_resize"!=a&&app_tasks_js_controller.resize("global_resize")};
    